# This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and run tests across different versions of node
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-nodejs

name: Node.js CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "develop" ]

jobs:
  build:

    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [18.17]
        # See supported Node.js release schedule at https://nodejs.org/en/about/releases/

    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Install and Build üîß # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.
        run: |
          npm ci
          npm run build

      - name: Copy Build Files
        run: |
          mkdir gh-pages
          cp -r dist/* gh-pages/
        working-directory: ${{ runner.workspace }}

      - name: Create and Push to gh-pages Branch
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git checkout -b gh-pages
          git add .
          git commit -m "Publish build artifacts"
          git push origin gh-pages
        working-directory: ${{ runner.workspace }}
        env:
          GITHUB_TOKEN: ${{ secrets.TOKEN }}          